# SQL

![](https://www.thedataschool.com.au/wp-content/uploads/2022/12/Sql_data_base_with_logo.png)

## **SQL** 
— это структурированный язык запросов, созданный для того, чтобы получать из базы данных необходимую информацию. Если описать схему работы SQL простыми словами, то специалист формирует запрос и направляет его в базу. Та в свою очередь обрабатывает эту информацию, «понимает», что именно нужно специалисту, и отправляет ответ.
## **Что такое реляционные БД?**
В реляционных базах данных данные хранятся в виде таблиц, они структурированы и разложены по строкам и столбцам, чтобы ими легче было оперировать. От англ. relation — «отношения», что указывает на то, что объекты в такой базе связаны определенными отношениями.
## **Как работают запросы?**
Чтобы разобраться, как именно работает магия запроса, давайте представим его путь от пользователя до нужных ему данных:

### Пользователь → Клиент → Запрос → Система управления → База данных → Таблица с базами данных

## **Что такое ключи в БД?**
Ключ — это самый важный столбец в таблице, за счет этих значений и происходит взаимодействие в реляционной базе данных, он связывает таблицы между собой.

**Ключи бывают нескольких видов:**

- Первичный ключ — идентификатор, такой как индекс или артикул.
- Потенциальный ключ — другое уникальное значение, которое может служить идентификатором.
- Внешний ключ — столбец-ссылка, используется для объединения двух таблиц, каждое значение внешнего ключа обязательно соответствует первичному ключу в другой таблице.

## Что такое SQL-операторы?
Работать с данными помогают операторы — определенные слова или символы, которые используются для выполнения конкретной операции.
## Операторы в SQL делятся на несколько групп в соответствии с задачами, которые они решают:

**1. DDL (Data Definition Language)** — операторы определения данных. Они работают с объектами, то есть с целыми таблицами. Если базу нужно дополнить таблицей с новыми данными или, наоборот, убрать одну из таблиц с ошибочными данными — используется этот набор операторов.
+ CREATE — создание объекта в базе данных
+ ALTER — изменение объекта
+ DROP — удаление объекта

**2. DML (Data Manipulation Language)** — операторы манипуляции данными. Эти операторы уже работают с содержимым таблиц — строками, атрибутами и значениями. С их помощью можно вносить изменения в конкретное значение. Например, заменить поле в колонке «Фамилия» в строке с данными сотрудницы компании посте того, как она вышла замуж. Или удалить строку с данными уволенного сотрудника.

+ SELECT — выбор данных в соответствии с условием
+ INSERT — добавление новых данных
+ UPDATE — изменение существующих данных
+ DELETE — удаление данных

**3. DCL (Data Control Language)** — оператор определения доступа к данным. Он определяет, кто из пользователей может отправлять запросы к базе, менять объекты и значения. Например, можно отозвать доступ у сотрудника, перешедшего в другой отдел, а также открыть доступ к базе новому маркетологу или разработчику.

+ GRANT — предоставление доступа к объекту
+ REVOKE — отзыв ранее выданного разрешения
+ DENY — запрет, который является приоритетным над разрешением

**4.TCL (Transaction Control Language)** — язык управления транзакциями. Транзакции — это набор команд, которые выполняются поочередно. Если все команды выполнены, транзакция считается успешной, а если где-то произошла ошибка — транзакция откатывается назад, отменяя все выполненные команды. Наглядный пример такой транзакции — оплата онлайн, когда банк просит сначала ввести сумму и получателя, затем проверить и подтвердить операцию, а после ввести одноразовый код. На каждом из этих этапов оплату можно отменить и транзакция откатится назад.

+ BEGIN TRANSACTION — обозначение начала транзакции
+ COMMIT TRANSACTION — изменение команд внутри транзакции
+ ROLLBACK TRANSACTION — откат транзакции
+ SAVE TRANSACTION — указание промежуточной точки сохранения внутри транзакции

## **Примеры реляционных СУБД**

+ PostgreSQL
+ MySQL
+ SQLite
+ Oracle
+ Google Cloud Spanner

Сами по себе таблицы или база данных не способны выполнять операции, а в СУБД можно создавать новые таблицы, удалять ненужные данные, настраивать ключи и обрабатывать запросы. Основные задачи СУБД:

- поддержка языков баз данных;
- непосредственное управление данными;
- управление буферами оперативной памяти;
- управление транзакциями;
- резервное копирование и восстановление после сбоев.

## **Нереляционные базы данных**
Кроме традиционных баз (SQL), существует ещё другой способ хранения данных, получивший широкое распространение со второй половины двухтысячных годов, – нереляционные базы данных. Они отличаются от реляционных тем, что в них для хранения используется не система из строк и столбцов, а применяется модель, которая оптимизирована для хранения определённого типа содержимого. Например, данные могут храниться в виде документов JSON, графов, а также ключей-значений.

Кроме того, можно сказать, что нереляционные базы данных не используют язык запросов SQL, и вместо него запросы осуществляются с помощью иных языков и конструкций.
В нереляционных БД строго определенной схемы взаимосвязи между данными нет. То есть информационная модель определяется СУБД «по ходу дела» в процессе работы приложения. Это позволяет быстро адаптировать базу данных в зависимости от того, с каким типом информации в конкретный момент времени работает приложение. Для решения аналогичной задачи с помощью реляционных БД пришлось бы подключать дополнительную базу данных.
## **Для чего можно использовать базы данных NoSQL?**

Базы данных NoSQL хорошо подходят для многих современных приложений, например мобильных, игровых, интернет‑приложений, когда требуются гибкие масштабируемые базы данных с высокой производительностью и широкими функциональными возможностями, способные обеспечивать максимальное удобство использования.

## **Примеры нереляционных БД**
+ Oracle NoSQL Database,
+ MongoDB, 
+ Apache Cassandra,
+ Berkeley DB,
+ MemcacheDB,
+ Redis,
+ Amazon DynamoDB
